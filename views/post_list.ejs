<html lang="en-gb">
<%- include('_head') -%>
<%- include('_header') -%>
<body>
<h1>Posts</h1>
<ol>
    <% postList.results.forEach(function(post) {%>
        <li>
            <h2>Posted by: <%= post.postedBy.username %></h2><br>
            <img src=<%= post.imageUrl %>><br>
            <h2><%= post.message %></h2><br>
            <p><%= format(post.createdAt, "yyyy-MM-dd HH:mm:ss") %></p><br> 
            
            <form method="post" action="/posts/<%= post.id %>/like/">
                <button type="submit">Like</button>
            </form>

            <form method="post" action="/posts/<%= post.id %>/dislike/">
                <button type="submit">Dislike</button>
            </form>

            <span><%= post.likedBy.length %> 
            <% if (post.likedBy.length == 1) { %>
                like and
            <% } else { %>
                likes and 
            <% }; %></span>

            <span><%= post.dislikedBy.length %> 
            <% if (post.dislikedBy.length == 1) { %>
                dislike.
            <% } else { %>
                dislikes.
            <% }; %></span>
                
        </li><br>
    <% }); %>
</ol>

<%if (postList.previous) { %>
    <a href="<%= postList.previous %>">Previous</a>
<% } %>
<%if (postList.next) { %>
    <a href="<%= postList.next %>">Next</a>
<% } %>

</body>
<%- include('_footer') -%>
</html>